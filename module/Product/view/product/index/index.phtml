<section class="col col-lg-3">
    <aside class="filter">
        <h3><span class="glyphicon glyphicon-filter"></span> <span class="product-list">Каталог товаров</span></h3>
        <!-- Accordion -->
        <?php echo $this->catalog ;?><!-- /Accordion -->
</aside>
</section>

<section class="col col-lg-9">
    <?php if (count($this->breadcrumbs) > 0) : ?>
        <ol class="breadcrumb">
            <?php
            /*
             * @todo change breadcrumbs
             */

            /*foreach ($this->breadcrumbs as $key => $value) {
                if (is_object($value)) {
                    echo '<li><a href="?' . $key . '=' . $value->getId() . '">' . $value->getName() . '</a></li>';
                }
            }*/

            if (is_null($this->breadcrumbs['catalog'])) {
                foreach ($this->breadcrumbs as $key => $value) {
                    if (is_array($value)) {
                        echo '<li>' . $value[0] . '<a href="?' . $key . '=' . $value[1]->getId() . '">' . $value[1]->getName() . '</a></li>';
                    }
                }
            } elseif (is_null($this->breadcrumbs['brand'])) {
                foreach ($this->breadcrumbs as $key => $value) {
                    if (is_null($value[0])) {
                        if (is_array($value)) {
                            if (!is_null($value[1])) {
                                echo '<li>' . $value[1][0]->getName() . ' :: <a href="?' . $key . '=' . $value[2]->getId() . '">' . $value[2]->getName() . '</a></li>';
                            } else {
                                echo '<li><a href="?' . $key . '=' . $value[2]->getId() . '">' . $value[2]->getName() . '</a></li>';
                            }
                        }
                    } else {
                        if (is_array($value)) {
                            echo '<li>' .$value[0][0]->getName() . ' :: ' . $value[1][0]->getName() . ' :: <a href="?' . $key . '=' . $value[2]->getId() . '">' . $value[2]->getName() . '</a></li>';
                        }
                    }
                }
            } else {
                foreach ($this->breadcrumbs as $key => $value) {
                    echo '<li>';
                    if (is_string($value[0])) {
                        echo $value[0] . '<a href="?' . $key . '=' . $value[1]->getId() . '">' . $value[1]->getName() . '</a>';
                    } else {
                        if (is_null($value[0])) {
                            if (!is_null($value[1])) {
                                echo $value[1][0]->getName() . ' :: <a href="?' . $key . '=' . $value[2]->getId() . '">' . $value[2]->getName() . '</a>';
                            } else {
                                echo '<a href="?' . $key . '=' . $value[2]->getId() . '">' . $value[2]->getName() . '</a>';
                            }
                        } else{
                            echo $value[0][0]->getName() . ' :: ' . $value[1][0]->getName() . ' :: <a href="?' . $key . '=' . $value[2]->getId() . '">' . $value[2]->getName() . '</a>';
                        }
                    }
                    echo '</li>';
                }
            }
            ?>
        </ol>
    <?php endif ?>
</section>

<section id="product-holder" class="col col-lg-9">
    <?php if ($this->paginator->count() > 0): ?>
        <?php foreach($this->paginator as $item): ?>
            <section class="col col-sm-6 col-md-4 product">
                <div class="thumbnail">
                    <?php if ($item->getImg()): ?>
                        <img src="/img/product/<?php echo $item->getImg()?>" alt="">
                    <?php else:?>
                        <img data-src="holder.js/270x200" alt="270x200" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIzMDAiIGhlaWdodD0iMjAwIj48cmVjdCB3aWR0aD0iMzAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2VlZSI+PC9yZWN0Pjx0ZXh0IHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjE1MCIgeT0iMTAwIiBzdHlsZT0iZmlsbDojYWFhO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1zaXplOjE5cHg7Zm9udC1mYW1pbHk6QXJpYWwsSGVsdmV0aWNhLHNhbnMtc2VyaWY7ZG9taW5hbnQtYmFzZWxpbmU6Y2VudHJhbCI+MzAweDIwMDwvdGV4dD48L3N2Zz4=" style="width: 270px; height: 200px;">
                    <?php endif; ?>
                    <div class="caption">
                        <h5><a href=""><?php echo $item->getName(); ?></a></h5>
                        <p><?php echo $item->getDescription(); ?></p>
                        <p>
                            <a href="#" class="btn btn-primary" role="button">Button</a>
                            <a href="#" class="btn btn-default" role="button">Button</a>
                        </p>
                    </div>
                </div>
            </section>
        <?php endforeach; ?>
    <?php else: ?>
        <h3>Извините, такого товара нет в магазине. <br>
            Вы можете воспользоваться поиском или изменить критерии выбора.</h3>
    <?php endif ?>
</section>
<div class="clearfix"></div><br>
<section class="col col-lg-9 col-lg-offset-3 text-center">
<?php
    echo (count($this->paginator) > 1) ? $this->paginationControl($this->paginator, 'Sliding', 'product/paginator/pagination.phtml') : "";
?>
</section>
<script src="/js/masonry.pkgd.min.js"></script>
<script>
    var $container = $('#product-holder');
    // initialize
    $container.masonry({
        itemSelector: '.product'
    });
</script>