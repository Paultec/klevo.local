/*!

Holder - 2.3.1 - client side image placeholders
(c) 2012-2014 Ivan Malopinsky / http://imsky.co

Provided under the MIT License.
Commercial use requires attribution.

*/
var Holder=Holder||{};(function(h,e){var w={use_svg:false,use_canvas:false,use_fallback:false};var o={};var A=false;canvas=document.createElement("canvas");var a=1,x=1;var c=[];if(!canvas.getContext){w.use_fallback=true}else{if(canvas.toDataURL("image/png").indexOf("data:image/png")<0){w.use_fallback=true}else{var n=canvas.getContext("2d")}}if(!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect){w.use_svg=true;w.use_canvas=false}if(!w.use_fallback){a=window.devicePixelRatio||1,x=n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1}var g=a/x;var t={domain:"holder.js",images:"img",bgnodes:".holderjs",themes:{gray:{background:"#eee",foreground:"#aaa",size:12},social:{background:"#3a5a97",foreground:"#fff",size:12},industrial:{background:"#434A52",foreground:"#C2F200",size:12},sky:{background:"#0D8FDB",foreground:"#fff",size:12},vine:{background:"#39DBAC",foreground:"#1E292C",size:12},lava:{background:"#F8591A",foreground:"#1C2846",size:12}},stylesheet:""};h.flags={dimensions:{regex:/^(\d+)x(\d+)$/,output:function(C){var B=this.regex.exec(C);return{width:+B[1],height:+B[2]}}},fluid:{regex:/^([0-9%]+)x([0-9%]+)$/,output:function(C){var B=this.regex.exec(C);return{width:B[1],height:B[2]}}},colors:{regex:/#([0-9a-f]{3,})\:#([0-9a-f]{3,})/i,output:function(C){var B=this.regex.exec(C);return{size:t.themes.gray.size,foreground:"#"+B[2],background:"#"+B[1]}}},text:{regex:/text\:(.*)/,output:function(B){return this.regex.exec(B)[1]}},font:{regex:/font\:(.*)/,output:function(B){return this.regex.exec(B)[1]}},auto:{regex:/^auto$/},textmode:{regex:/textmode\:(.*)/,output:function(B){return this.regex.exec(B)[1]}}};function j(G,C,F){C=parseInt(C,10);G=parseInt(G,10);var B=Math.max(C,G);var E=Math.min(C,G);var H=1/12;var D=Math.min(E*0.75,0.75*B*H);return{height:Math.round(Math.max(F.size,D))}}var v=(function(){if(!window.XMLSerializer){return}var E=new XMLSerializer();var G="http://www.w3.org/2000/svg";var B=document.createElementNS(G,"svg");if(B.webkitMatchesSelector){B.setAttribute("xmlns","http://www.w3.org/2000/svg")}var C=document.createElementNS(G,"rect");var F=document.createElementNS(G,"text");var D=document.createTextNode(null);F.setAttribute("text-anchor","middle");F.appendChild(D);B.appendChild(C);B.appendChild(F);return function(H){B.setAttribute("width",H.width);B.setAttribute("height",H.height);C.setAttribute("width",H.width);C.setAttribute("height",H.height);C.setAttribute("fill",H.template.background);F.setAttribute("x",H.width/2);F.setAttribute("y",H.height/2);D.nodeValue=H.text;F.setAttribute("style",k({fill:H.template.foreground,"font-weight":"bold","font-size":H.text_height+"px","font-family":H.font,"dominant-baseline":"central"}));return E.serializeToString(B)}})();function k(C){var B=[];for(p in C){if(C.hasOwnProperty(p)){B.push(p+":"+C[p])}}return B.join(";")}function b(J){var P=J.ctx,B=J.dimensions,M=J.template,I=J.ratio,K=J.holder,L=K.textmode=="literal",F=K.textmode=="exact";var H=j(B.width,B.height,M);var G=H.height;var D=B.width*I,O=B.height*I;var E=M.font?M.font:"Arial,Helvetica,sans-serif";canvas.width=D;canvas.height=O;P.textAlign="center";P.textBaseline="middle";P.fillStyle=M.background;P.fillRect(0,0,D,O);P.fillStyle=M.foreground;P.font="bold "+G+"px "+E;var N=M.text?M.text:(Math.floor(B.width)+"x"+Math.floor(B.height));if(L){var B=K.dimensions;N=B.width+"x"+B.height}else{if(F&&K.exact_dimensions){var B=K.exact_dimensions;N=(Math.floor(B.width)+"x"+Math.floor(B.height))}}var C=P.measureText(N).width;if(C/D>=0.75){G=Math.floor(G*0.75*(D/C))}P.font="bold "+(G*I)+"px "+E;P.fillText(N,(D/2),(O/2),D);return canvas.toDataURL("image/png")}function l(I){var B=I.dimensions,L=I.template,J=I.holder,K=J.textmode=="literal",F=J.textmode=="exact";var G=j(B.width,B.height,L);var H=G.height;var C=B.width,N=B.height;var D=L.font?L.font:"Arial,Helvetica,sans-serif";var M=L.text?L.text:(Math.floor(B.width)+"x"+Math.floor(B.height));if(K){var B=J.dimensions;M=B.width+"x"+B.height}else{if(F&&J.exact_dimensions){var B=J.exact_dimensions;M=(Math.floor(B.width)+"x"+Math.floor(B.height))}}var E=v({text:M,width:C,height:N,text_height:H,font:D,template:L});return"data:image/svg+xml;base64,"+btoa(E)}function i(B){if(o.use_canvas&&!o.use_svg){return b(B)}else{return l(B)}}function z(I,D,C,H){var E=C.dimensions,F=C.theme,G=C.text?decodeURIComponent(C.text):C.text;var B=E.width+"x"+E.height;F=(G?s(F,{text:G}):F);F=(C.font?s(F,{font:C.font}):F);D.setAttribute("data-src",H);C.theme=F;D.holder_data=C;if(I=="image"){D.setAttribute("alt",G?G:F.text?F.text+" ["+B+"]":B);if(o.use_fallback||!C.auto){D.style.width=E.width+"px";D.style.height=E.height+"px"}if(o.use_fallback){D.style.backgroundColor=F.background}else{D.setAttribute("src",i({ctx:n,dimensions:E,template:F,ratio:g,holder:C}));if(C.textmode&&C.textmode=="exact"){c.push(D);y(D)}}}else{if(I=="background"){if(!o.use_fallback){D.style.backgroundImage="url("+i({ctx:n,dimensions:E,template:F,ratio:g,holder:C})+")";D.style.backgroundSize=E.width+"px "+E.height+"px"}}else{if(I=="fluid"){D.setAttribute("alt",G?G:F.text?F.text+" ["+B+"]":B);if(E.height.slice(-1)=="%"){D.style.height=E.height}else{if(C.auto==null||!C.auto){D.style.height=E.height+"px"}}if(E.width.slice(-1)=="%"){D.style.width=E.width}else{if(C.auto==null||!C.auto){D.style.width=E.width+"px"}}if(D.style.display=="inline"||D.style.display===""||D.style.display=="none"){D.style.display="block"}d(D);if(o.use_fallback){D.style.backgroundColor=F.background}else{c.push(D);y(D)}}}}}function m(B,D){var C={height:B.clientHeight,width:B.clientWidth};if(!C.height&&!C.width){B.setAttribute("data-holder-invisible",true);D.call(this,B)}else{B.removeAttribute("data-holder-invisible");return C}}function d(C){if(C.holder_data){var D=m(C,h.invisible_error_fn(d));if(D){var B=C.holder_data;B.initial_dimensions=D;B.fluid_data={fluid_height:B.dimensions.height.slice(-1)=="%",fluid_width:B.dimensions.width.slice(-1)=="%",mode:null};if(B.fluid_data.fluid_width&&!B.fluid_data.fluid_height){B.fluid_data.mode="width";B.fluid_data.ratio=B.initial_dimensions.width/parseFloat(B.dimensions.height)}else{if(!B.fluid_data.fluid_width&&B.fluid_data.fluid_height){B.fluid_data.mode="height";B.fluid_data.ratio=parseFloat(B.dimensions.width)/B.initial_dimensions.height}}}}}function y(E){var B;if(E.nodeType==null){B=c}else{B=[E]}for(var D in B){if(!B.hasOwnProperty(D)){continue}var F=B[D];if(F.holder_data){var C=F.holder_data;var G=m(F,h.invisible_error_fn(y));if(G){if(C.fluid){if(C.auto){switch(C.fluid_data.mode){case"width":G.height=G.width/C.fluid_data.ratio;break;case"height":G.width=G.height*C.fluid_data.ratio;break}}F.setAttribute("src",i({ctx:n,dimensions:G,template:C.theme,ratio:g,holder:C}))}if(C.textmode&&C.textmode=="exact"){C.exact_dimensions=G;F.setAttribute("src",i({ctx:n,dimensions:C.dimensions,template:C.theme,ratio:g,holder:C}))}}}}}function f(C,F){var E={theme:s(t.themes.gray,{})};var G=false;for(var H=C.length,D=0;D<H;D++){var B=C[D];if(h.flags.dimensions.match(B)){G=true;E.dimensions=h.flags.dimensions.output(B)}else{if(h.flags.fluid.match(B)){G=true;E.dimensions=h.flags.fluid.output(B);E.fluid=true}else{if(h.flags.textmode.match(B)){E.textmode=h.flags.textmode.output(B)}else{if(h.flags.colors.match(B)){E.theme=h.flags.colors.output(B)}else{if(F.themes[B]){if(F.themes.hasOwnProperty(B)){E.theme=s(F.themes[B],{})}}else{if(h.flags.font.match(B)){E.font=h.flags.font.output(B)}else{if(h.flags.auto.match(B)){E.auto=true}else{if(h.flags.text.match(B)){E.text=h.flags.text.output(B)}}}}}}}}}return G?E:false}for(var r in h.flags){if(!h.flags.hasOwnProperty(r)){continue}h.flags[r].match=function(B){return B.match(this.regex)}}h.invisible_error_fn=function(B){return function(C){if(C.hasAttribute("data-holder-invisible")){throw new Error("Holder: invisible placeholder")}}};h.add_theme=function(B,C){B!=null&&C!=null&&(t.themes[B]=C);return h};h.add_image=function(G,E){var F=q(E);if(F.length){for(var D=0,B=F.length;D<B;D++){var C=document.createElement("img");C.setAttribute("data-src",G);F[D].appendChild(C)}}return h};h.run=function(C){o=s({},w);A=true;var Q=s(t,C),N=[],L=[],P=[];if(Q.use_canvas!=null&&Q.use_canvas){o.use_canvas=true;o.use_svg=false}if(typeof(Q.images)=="string"){L=q(Q.images)}else{if(window.NodeList&&Q.images instanceof window.NodeList){L=Q.images}else{if(window.Node&&Q.images instanceof window.Node){L=[Q.images]}else{if(window.HTMLCollection&&Q.images instanceof window.HTMLCollection){L=Q.images}}}}if(typeof(Q.bgnodes)=="string"){P=q(Q.bgnodes)}else{if(window.NodeList&&Q.elements instanceof window.NodeList){P=Q.bgnodes}else{if(window.Node&&Q.bgnodes instanceof window.Node){P=[Q.bgnodes]}}}for(H=0,F=L.length;H<F;H++){N.push(L[H])}var E=document.getElementById("holderjs-style");if(!E){E=document.createElement("style");E.setAttribute("id","holderjs-style");E.type="text/css";document.getElementsByTagName("head")[0].appendChild(E)}if(!Q.nocss){if(E.styleSheet){E.styleSheet.cssText+=Q.stylesheet}else{E.appendChild(document.createTextNode(Q.stylesheet))}}var M=new RegExp(Q.domain+'/(.*?)"?\\)');for(var F=P.length,H=0;H<F;H++){var B=window.getComputedStyle(P[H],null).getPropertyValue("background-image");var D=B.match(M);var K=P[H].getAttribute("data-background-src");if(D){var O=f(D[1].split("/"),Q);if(O){z("background",P[H],O,B)}}else{if(K!=null){var O=f(K.substr(K.lastIndexOf(Q.domain)+Q.domain.length+1).split("/"),Q);if(O){z("background",P[H],O,B)}}}}for(F=N.length,H=0;H<F;H++){var G,I;I=G=B=null;try{I=N[H].getAttribute("src");attr_datasrc=N[H].getAttribute("data-src")}catch(J){}if(attr_datasrc==null&&!!I&&I.indexOf(Q.domain)>=0){B=I}else{if(!!attr_datasrc&&attr_datasrc.indexOf(Q.domain)>=0){B=attr_datasrc}}if(B){var O=f(B.substr(B.lastIndexOf(Q.domain)+Q.domain.length+1).split("/"),Q);if(O){if(O.fluid){z("fluid",N[H],O,B)}else{z("image",N[H],O,B)}}}}return h};u(e,function(){if(window.addEventListener){window.addEventListener("resize",y,false);window.addEventListener("orientationchange",y,false)}else{window.attachEvent("onresize",y)}A||h.run({})});if(typeof define==="function"&&define.amd){define([],function(){return h})}(function(){function B(E){this.message=E}var D="undefined"!=typeof exports?exports:this,C="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";B.prototype=Error(),B.prototype.name="InvalidCharacterError",D.btoa||(D.btoa=function(G){for(var H,J,E=0,F=C,I="";G.charAt(0|E)||(F="=",E%1);I+=F.charAt(63&H>>8-8*(E%1))){if(J=G.charCodeAt(E+=0.75),J>255){throw new B("'btoa' failed")}H=H<<8|J}return I}),D.atob||(D.atob=function(G){if(G=G.replace(/=+$/,""),1==G.length%4){throw new B("'atob' failed")}for(var H,J,E=0,F=0,I="";J=G.charAt(F++);~J&&(H=E%4?64*H+J:J,E++%4)?I+=String.fromCharCode(255&H>>(6&-2*E)):0){J=C.indexOf(J)}return I})})();document.getElementsByClassName||(document.getElementsByClassName=function(F){var C=document,G,E,B,D=[];if(C.querySelectorAll){return C.querySelectorAll("."+F)}if(C.evaluate){E=".//*[contains(concat(' ', @class, ' '), ' "+F+" ')]",G=C.evaluate(E,C,null,0,null);while(B=G.iterateNext()){D.push(B)}}else{G=C.getElementsByTagName("*"),E=new RegExp("(^|\\s)"+F+"(\\s|$)");for(B=0;B<G.length;B++){E.test(G[B].className)&&D.push(G[B])}}return D});window.getComputedStyle||(window.getComputedStyle=function(B){return this.el=B,this.getPropertyValue=function(C){var D=/(\-([a-z]){1})/g;return C=="float"&&(C="styleFloat"),D.test(C)&&(C=C.replace(D,function(){return arguments[2].toUpperCase()})),B.currentStyle[C]?B.currentStyle[C]:null},this});function u(D,O){var E="complete",P="readystatechange",N=!1,G=N,J=!0,F=D.document,L=F.documentElement,I=F.addEventListener?"addEventListener":"attachEvent",M=F.addEventListener?"removeEventListener":"detachEvent",H=F.addEventListener?"":"on",B=function(Q){(Q.type!=P||F.readyState==E)&&((Q.type=="load"?D:F)[M](H+Q.type,B,N),!G&&(G=!0)&&O.call(D,null))},C=function(){try{L.doScroll("left")}catch(Q){setTimeout(C,50);return}B("poll")};if(F.readyState==E){O.call(D,"lazy")}else{if(F.createEventObject&&L.doScroll){try{J=!D.frameElement}catch(K){}J&&C()}F[I](H+"DOMContentLoaded",B,N),F[I](H+P,B,N),D[I](H+"load",B,N)}}function q(C,B){var C=C.match(/^(\W)?(.*)/),B=B||document,F=B["getElement"+(C[1]?"#"==C[1]?"ById":"sByClassName":"sByTagName")],E=F.call(B,C[2]),D=[];return null!==E&&(D=E.length||0===E.length?E:[E]),D}function s(C,B){var E={};for(var D in C){if(C.hasOwnProperty(D)){E[D]=C[D]}}for(var D in B){if(B.hasOwnProperty(D)){E[D]=B[D]}}return E}if(!Object.prototype.hasOwnProperty){Object.prototype.hasOwnProperty=function(C){var B=this.__proto__||this.constructor.prototype;return(C in this)&&(!(C in B)||B[C]!==this[C])}}})(Holder,window);