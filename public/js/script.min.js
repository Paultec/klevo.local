$(function(){var Z=$(".horizontal-nav a");Z.hover(function(){$(this).css({color:"#563D7C"}).children().css({color:"#428BCA"})},function(){$(this).css({color:"#428BCA"}).children().css({color:"#563D7C"})});var E=["glyphicon-picture","glyphicon-pencil","glyphicon-comment","glyphicon-shopping-cart","glyphicon-earphone"];var l=$(".nav:first").find("li").find("a");l.each(function(af){$(this).append(' <span class="glyphicon '+E[af]+'"><span>')});var i=$(".nav li"),o=$(".logout");i.hover(function(){$("ul",this).slideDown()},function(){$("ul",this).slideUp()});$(".sub-nav li").hover(function(){o.css("background-color","#eee")},function(){o.css("background-color","transparent")});o.hover(function(){$(this).css("background-color","#eee")},function(){$(this).css("background-color","transparent")});$(".items").mosaic({animation:"slide"});$(".accordion").each(function(){$(this).accordion({header:$(this).children("h3"),active:false,collapsible:true,heightStyle:"content"})});$(window).on("hashchange",function(af){var ag=window.location.hash.replace(/^#\/?/,"");if(document.getElementById(ag)){$.smoothScroll({scrollTarget:"#"+ag})}});$(window).trigger("hashchange");var W=$("#auth_btn");var f=/^[\w\.=-]+@[\w\.-]+\.[\w]{2,6}$/i,p=/^[a-zA-z]{1}[a-zA-Z1-9]{7,20}$/i;var s=false,z=false;var P=$("#identity"),ab=$("#credential");P.on("change",function(){var af=$(this).val();s=f.test(af);if(s){$(this).css("border","1px solid green")}else{$(this).css("border","1px solid red")}});ab.on("change",function(){var af=$(this).val();z=p.test(af);if(z){$(this).css("border","1px solid green")}else{$(this).css("border","1px solid red")}});var ad=$(".register_form");ad.find("label").eq(0).attr("for","email").next().attr({id:"email",type:"email",placeholder:"Введите Email"});ad.find("label").eq(1).attr("for","password").next().attr({id:"password",placeholder:"Введите Пароль"});ad.find("label").eq(2).attr("for","passwordVerify").next().attr({id:"passwordVerify",placeholder:"Повторите Пароль"});var U=ad.find("button");U.attr("disabled",true);var C=false,y=false;var D=$("#password"),T=$("#passwordVerify");$("#email").on("keyup",function(){var af=$(this).val();C=f.test(af);if(C){$(this).css("border","1px solid green")}else{$(this).css("border","1px solid red")}A()});D.on("keyup",function(){var af=$(this).val();y=p.test(af);if(y){$(this).css("border","1px solid green")}else{$(this).css("border","1px solid red")}A()});T.on("keyup",function(){if(y&&D.val()==T.val()){$(this).css("border","1px solid green");D.css("border","1px solid green")}else{$(this).css("border","1px solid red");D.css("border","1px solid red")}A()});function A(){if(C==true&&y==true&&D.val()==T.val()){U.attr("disabled",false)}else{U.attr("disabled",true)}}var K=$(".change_mail_form");K.find("label").eq(0).attr("for","newEmail").next().attr({id:"newEmail",type:"email",placeholder:"Введите Email"});K.find("label").eq(1).attr("for","emailVerify").next().attr({id:"emailVerify",type:"email",placeholder:"Повторите Email"});K.find("label").eq(2).attr("for","password").next().attr({id:"password",placeholder:"Введите Пароль"});var aa=$("#change_email");aa.attr("disabled",true);var j=false,G=false;var v=$("#newEmail"),m=$("#emailVerify");v.on("keyup",function(){var af=$(this).val();j=f.test(af);if(j){$(this).css("border","1px solid green")}else{$(this).css("border","1px solid red")}d()});m.on("keyup",function(){if(j&&v.val()==m.val()){$(this).css("border","1px solid green");v.css("border","1px solid green")}else{$(this).css("border","1px solid red");v.css("border","1px solid red")}d()});$("#password").on("keyup",function(){var af=$(this).val();G=p.test(af);if(G){$(this).css("border","1px solid green")}else{$(this).css("border","1px solid red")}d()});function d(){if(j==true&&G==true&&v.val()==m.val()){aa.attr("disabled",false)}else{aa.attr("disabled",true)}}var B=$(".change_pass_form");B.find("label").eq(0).attr("for","oldPass").next().attr({id:"oldPass",type:"password",placeholder:"Текущий пароль"});B.find("label").eq(1).attr("for","newPass").next().attr({id:"newPass",type:"password",placeholder:"Новый пароль"});B.find("label").eq(2).attr("for","passVerify").next().attr({id:"passVerify",placeholder:"Повторите пароль"});var e=$("#change_pass");e.attr("disabled",true);var b=false,g=false;var J=$("#newPass"),L=$("#passVerify");J.on("keyup",function(){var af=$(this).val();b=p.test(af);if(b){$(this).css("border","1px solid green")}else{$(this).css("border","1px solid red")}S()});L.on("keyup",function(){if(b&&J.val()==L.val()){$(this).css("border","1px solid green");J.css("border","1px solid green")}else{$(this).css("border","1px solid red");J.css("border","1px solid red")}S()});$("#oldPass").on("keyup",function(){var af=$(this).val();g=p.test(af);if(g){$(this).css("border","1px solid green")}else{$(this).css("border","1px solid red")}S()});function S(){if(b==true&&g==true&&J.val()==L.val()){e.attr("disabled",false)}else{e.attr("disabled",true)}}$("form").find("ul").addClass("list-unstyled").find("li").css({color:"#cc0000",background:"#FFDD7A"}).prepend('<span class="glyphicon glyphicon glyphicon-ban-circle"></span> ');o.on("click",function(){return confirm("Вы действительно хотите выйти из системы?")});$('[data-toggle="tooltip"]').tooltip({animation:true});$(".back").on("click",function(){history.back()});$(".warning").on("click",function(){return confirm("Вы действительно хотите удалить этот элемент, это может привести к нарушению целостности системы! Удалить?")});var ae=$('[name="parent_state"]').val(),u=$(".category_select").find("option"),a=$(".name_input").val();u.each(function(af){if(ae==$(this).val()){$(this).css("color","#428BCA").attr("selected",true)}if(a==$(this).text()){$(this).attr("disabled",true)}});var F=$('[name="brand_state"]').val(),r=$('[name="catalog_state"]').val(),R=$(".brand_select").find("option"),ac=u;R.each(function(){if(F==$(this).val()){$(this).css("color","#428BCA").attr("selected",true)}});ac.each(function(){if(r==$(this).val()){$(this).css("color","#428BCA").attr("selected",true)}});$(".hide_row").addClass("text-muted").find("a").css("opacity",0.4).end().find(".show-hide").html('<span class="glyphicon glyphicon glyphicon-eye-open"></span> Показать');var H=$(".form_wrap").find('[type="file"]').val(""),V=$(".excel-file-button").attr("disabled",true);H.on("change",function(){if($(this).val().indexOf(".xls")>0||$(this).val().indexOf(".xlsx")>0){w()}else{V.attr("disabled",true)}});function w(){V.attr("disabled",false)}var Y=$(".img-file-button").attr("disabled",true);H.on("change",function(){if($(this).val().indexOf(".png")>0||$(this).val().indexOf(".jpeg")>0||$(this).val().indexOf(".jpg")>0){q()}else{Y.attr("disabled",true)}});function q(){Y.attr("disabled",false)}var k=window.location.search,O=$(".brand-link"),x=$(".catalog-link");if(k.indexOf("brand")!=-1){x.each(function(ah){var ak=k.slice(1,k.length)+"&";var af=$(this).attr("href");var aj=af.slice(0,af.indexOf("?")+1);var ag=af.slice(af.indexOf("?")+1,af.length);var ai=aj+ak+ag;$(this).attr("href",ai)})}if(k.indexOf("catalog")!=-1){O.each(function(af){$(this).attr("href",($(this).attr("href")+"&"+k.slice(1,k.length)))})}if(k.indexOf("brand")>0&&k.indexOf("catalog")>0){O.each(function(ah){var af=$(this).attr("href");var ai=af.slice(0,af.indexOf("&"));var ag=af.slice(af.lastIndexOf("&"),af.length);$(this).attr("href",ai+ag)});x.each(function(){var af=$(this).attr("href");var ah=af.slice(0,af.indexOf("&"));var ag=af.slice(af.lastIndexOf("&"),af.length);$(this).attr("href",ah+ag)})}var N=$(".link-type").data("type");if(N!=""&&N!==undefined){O.each(function(ah){var af=$(this).attr("href");var ag=af.slice(af.lastIndexOf("/"),af.length);$(this).attr("href","/"+N+ag)});x.each(function(){var af=$(this).attr("href");var ag=af.slice(af.lastIndexOf("/"),af.length);$(this).attr("href","/"+N+ag)})}var c=$(".first-page");c.on("click",function(ai){var af=window.location.href;if(k.indexOf("brand")>0||k.indexOf("catalog")>0){var ah=af.slice(0,af.lastIndexOf("/")+1);var ag=af.slice(af.indexOf("?"),af.length);window.location=ah+"1"+ag;ai.preventDefault()}});var Q=$(".first-search-page");Q.on("click",function(ai){var af=window.location.href;if(k.indexOf("q")>0){var ah=af.slice(0,af.lastIndexOf("?")-1);var ag=af.slice(af.indexOf("?"),af.length);window.location=ah+ag}ai.preventDefault()});if(k.indexOf("q")>0){var t=window.location.href;var X=t.slice(t.indexOf("=")+1,t.length);var I=decodeURIComponent(X).replace(/\+/g," ");$(".search-input").val(I)}var h=$(".breadcrumb");h.find("a").on("click",function(ah){var af=window.location.href;var ag=af.slice(0,af.lastIndexOf("/")+1);window.location=ag+$(this).attr("href");ah.preventDefault()});$(".product-list").on("click",function(af){window.location="/product";af.preventDefault()});if(k.indexOf("brand")==-1&&k.indexOf("catalog")==-1){h.css("visibility","hidden")}if($("#productList-table").length>0){h.css("visibility","visible")}$(".number").attr({type:"number",min:0,step:0.01});var M=$("#product");M.find("label").wrap('<div class="form-group"></div>');var n=$("#back-to-top");$(window).scroll(function(){if($(this).scrollTop()>350){n.fadeIn()}else{n.fadeOut()}});n.on("click",function(){$("#back-to-top").tooltip("hide");$("body, html").animate({scrollTop:0},800);return false});n.tooltip("show");$(".product-price").each(function(){var af=$(this).text().split(".");var ah=!isNaN(af[0])?parseInt(af[0]):"",ag=!isNaN(af[1])?parseInt(af[1]):"";if(ah&&ag){$(this).text(ah+" грн. "+ag+" коп.")}else{if(ah){$(this).text(ah+"  грн.")}else{if(ag){$(this).text(ag+" коп.")}else{$(this).text("")}}}});$("img.lazy").lazyload({effect:"fadeIn"});M.on("submit",function(){var af=M.find("textarea");if(af.val()==""){af.val("empty")}})});