$(function(){var g=window.localStorage.getItem("close");if(g===null){$("body").prepend('<p id="dummy" class="text-center" style="background-color: #cc0000; color: #ffff00; font-weight: bold; padding: 5px 0;  position: relative">Сайт в разработке, спасибо за понимание. <span class="glyphicon glyphicon-remove" style="cursor: pointer; position: absolute; top: 8px; right: 10px"></span></p>')}$("#dummy").find("span").on("click",function(){$("#dummy").slideUp();window.localStorage.setItem("close","yes")});var ad=$(".horizontal-nav");ad.find("a").hover(function(){$(this).css({color:"#563D7C"}).children().css({color:"#428BCA"})},function(){$(this).css({color:"#428BCA"}).children().css({color:"#563D7C"})});var G=["glyphicon-home","glyphicon-picture","glyphicon-pencil","glyphicon-comment","glyphicon-shopping-cart","glyphicon-earphone"];var l=$(".nav:first").find("li").find("a");l.each(function(aj){$(this).append(' <span class="glyphicon '+G[aj]+'"><span>')});ad.find("li.active").addClass("outline-outward");var o=$(".grub-data");o.appendTo($(".main-nav"));o.children().unwrap();$("ul.nav").find("li.dropdown").hover(function(){$(".dropdown-menu",this).fadeIn()},function(){$(".dropdown-menu",this).fadeOut()});$(".bottom-nav").find("li").find("a").removeClass("float-shadow");var q=$(".items");if(q.length>0){q.mosaic({animation:"slide"})}$(".accordion").each(function(){$(this).accordion({header:$(this).children("h3"),active:false,collapsible:true,heightStyle:"content"})});$(window).on("hashchange",function(aj){var ak=window.location.hash.replace(/^#\/?/,"");if(document.getElementById(ak)){$.smoothScroll({scrollTarget:"#"+ak})}});$(window).trigger("hashchange");var aa=$("#auth_btn");var f=/^[\w\.=-]+@[\w\.-]+\.[\w]{2,6}$/i,p=/^[a-zA-z]{1}[a-zA-Z1-9]{7,20}$/i;var t=false,B=false;var T=$("#identity"),af=$("#credential");T.on("change",function(){var aj=$(this).val();t=f.test(aj);if(t){$(this).css("border","1px solid green")}else{$(this).css("border","1px solid red")}});af.on("change",function(){var aj=$(this).val();B=p.test(aj);if(B){$(this).css("border","1px solid green")}else{$(this).css("border","1px solid red")}});var ah=$(".register_form");ah.find("label").eq(0).attr("for","email").next().attr({id:"email",type:"email",placeholder:"Введите Email"});ah.find("label").eq(1).attr("for","password").next().attr({id:"password",placeholder:"Введите Пароль"});ah.find("label").eq(2).attr("for","passwordVerify").next().attr({id:"passwordVerify",placeholder:"Повторите Пароль"});var Y=ah.find("button");Y.attr("disabled",true);var E=false,A=false;var F=$("#password"),X=$("#passwordVerify");$("#email").on("keyup",function(){var aj=$(this).val();E=f.test(aj);if(E){$(this).css("border","1px solid green")}else{$(this).css("border","1px solid red")}C()});F.on("keyup",function(){var aj=$(this).val();A=p.test(aj);if(A){$(this).css("border","1px solid green")}else{$(this).css("border","1px solid red")}C()});X.on("keyup",function(){if(A&&F.val()==X.val()){$(this).css("border","1px solid green");F.css("border","1px solid green")}else{$(this).css("border","1px solid red");F.css("border","1px solid red")}C()});function C(){if(E==true&&A==true&&F.val()==X.val()){Y.attr("disabled",false)}else{Y.attr("disabled",true)}}var N=$(".change_mail_form");N.find("label").eq(0).attr("for","newEmail").next().attr({id:"newEmail",type:"email",placeholder:"Введите Email"});N.find("label").eq(1).attr("for","emailVerify").next().attr({id:"emailVerify",type:"email",placeholder:"Повторите Email"});N.find("label").eq(2).attr("for","password").next().attr({id:"password",placeholder:"Введите Пароль"});var ae=$("#change_email");ae.attr("disabled",true);var j=false,J=false;var w=$("#newEmail"),m=$("#emailVerify");w.on("keyup",function(){var aj=$(this).val();j=f.test(aj);if(j){$(this).css("border","1px solid green")}else{$(this).css("border","1px solid red")}d()});m.on("keyup",function(){if(j&&w.val()==m.val()){$(this).css("border","1px solid green");w.css("border","1px solid green")}else{$(this).css("border","1px solid red");w.css("border","1px solid red")}d()});$("#password").on("keyup",function(){var aj=$(this).val();J=p.test(aj);if(J){$(this).css("border","1px solid green")}else{$(this).css("border","1px solid red")}d()});function d(){if(j==true&&J==true&&w.val()==m.val()){ae.attr("disabled",false)}else{ae.attr("disabled",true)}}var D=$(".change_pass_form");D.find("label").eq(0).attr("for","oldPass").next().attr({id:"oldPass",type:"password",placeholder:"Текущий пароль"});D.find("label").eq(1).attr("for","newPass").next().attr({id:"newPass",type:"password",placeholder:"Новый пароль"});D.find("label").eq(2).attr("for","passVerify").next().attr({id:"passVerify",placeholder:"Повторите пароль"});var e=$("#change_pass");e.attr("disabled",true);var b=false,h=false;var M=$("#newPass"),O=$("#passVerify");M.on("keyup",function(){var aj=$(this).val();b=p.test(aj);if(b){$(this).css("border","1px solid green")}else{$(this).css("border","1px solid red")}W()});O.on("keyup",function(){if(b&&M.val()==O.val()){$(this).css("border","1px solid green");M.css("border","1px solid green")}else{$(this).css("border","1px solid red");M.css("border","1px solid red")}W()});$("#oldPass").on("keyup",function(){var aj=$(this).val();h=p.test(aj);if(h){$(this).css("border","1px solid green")}else{$(this).css("border","1px solid red")}W()});function W(){if(b==true&&h==true&&M.val()==O.val()){e.attr("disabled",false)}else{e.attr("disabled",true)}}$("form").find("ul").addClass("list-unstyled").find("li").css({color:"#cc0000",background:"#FFDD7A"}).prepend('<span class="glyphicon glyphicon glyphicon-ban-circle"></span> ');$(".logout").on("click",function(){return confirm("Вы действительно хотите выйти из системы?")});$('[data-toggle="tooltip"]').tooltip({animation:true});$(".back").on("click",function(){history.back()});$(".warning").on("click",function(){return confirm("Вы действительно хотите удалить этот элемент, это может привести к нарушению целостности системы! Удалить?")});var ai=$('[name="parent_state"]').val(),v=$(".category_select").find("option"),a=$(".name_input").val();v.each(function(aj){if(ai==$(this).val()){$(this).css("color","#428BCA").attr("selected",true)}if(a==$(this).text()){$(this).attr("disabled",true)}});var I=$('[name="brand_state"]').val(),y=$('[name="supplier_state"]').val(),s=$('[name="catalog_state"]').val(),R=$(".supplier_select").find("option"),V=$(".brand_select").find("option"),ag=v;V.each(function(){if(I==$(this).val()){$(this).css("color","#428BCA").attr("selected",true)}});ag.each(function(){if(s==$(this).val()){$(this).css("color","#428BCA").attr("selected",true)}});R.each(function(){if(y==$(this).val()){$(this).css("color","#428BCA").attr("selected",true)}});$(".hide_row").addClass("text-muted").find("a").css("opacity",0.4).end().find(".show-hide").html('<span class="glyphicon glyphicon glyphicon-eye-open"></span> Показать');var K=$(".form_wrap").find('[type="file"]').val(""),Z=$(".excel-file-button").attr("disabled",true);K.on("change",function(){if($(this).val().indexOf(".xls")>0||$(this).val().indexOf(".xlsx")>0){x()}else{Z.attr("disabled",true)}});function x(){Z.attr("disabled",false)}var ac=$(".img-file-button").attr("disabled",true);K.on("change",function(){if($(this).val().indexOf(".png")>0||$(this).val().indexOf(".jpeg")>0||$(this).val().indexOf(".jpg")>0){r()}else{ac.attr("disabled",true)}});function r(){ac.attr("disabled",false)}var k=window.location.search,S=$(".brand-link"),z=$(".catalog-link");if(k.indexOf("brand")!=-1){z.each(function(al){var ao=k.slice(1,k.length)+"&";var aj=$(this).attr("href");var an=aj.slice(0,aj.indexOf("?")+1);var ak=aj.slice(aj.indexOf("?")+1,aj.length);var am=an+ao+ak;$(this).attr("href",am)})}if(k.indexOf("catalog")!=-1){S.each(function(aj){$(this).attr("href",($(this).attr("href")+"&"+k.slice(1,k.length)))})}if(k.indexOf("brand")>0&&k.indexOf("catalog")>0){S.each(function(al){var aj=$(this).attr("href");var am=aj.slice(0,aj.indexOf("&"));var ak=aj.slice(aj.lastIndexOf("&"),aj.length);$(this).attr("href",am+ak)});z.each(function(){var aj=$(this).attr("href");var al=aj.slice(0,aj.indexOf("&"));var ak=aj.slice(aj.lastIndexOf("&"),aj.length);$(this).attr("href",al+ak)})}var Q=$(".link-type").data("type");if(Q!=""&&Q!==undefined){S.each(function(al){var aj=$(this).attr("href");var ak=aj.slice(aj.lastIndexOf("/"),aj.length);$(this).attr("href","/"+Q+ak)});z.each(function(){var aj=$(this).attr("href");var ak=aj.slice(aj.lastIndexOf("/"),aj.length);$(this).attr("href","/"+Q+ak)})}var c=$(".first-page");c.on("click",function(am){var aj=window.location.href;if(k.indexOf("brand")>0||k.indexOf("catalog")>0){var al=aj.slice(0,aj.lastIndexOf("/")+1);var ak=aj.slice(aj.indexOf("?"),aj.length);window.location=al+"1"+ak;am.preventDefault()}});var U=$(".first-search-page");U.on("click",function(am){var aj=window.location.href;if(k.indexOf("q")>0){var al=aj.slice(0,aj.lastIndexOf("?")-1);var ak=aj.slice(aj.indexOf("?"),aj.length);window.location=al+ak}am.preventDefault()});if(k.indexOf("q")>0){var u=window.location.href;var ab=u.slice(u.indexOf("=")+1,u.length);var L=decodeURIComponent(ab).replace(/\+/g," ");$(".search-input").val(L)}var i=$(".breadcrumb");i.find("a").on("click",function(al){var aj=window.location.href;var ak=aj.slice(0,aj.lastIndexOf("/")+1);window.location=ak+$(this).attr("href");al.preventDefault()});$(".product-list").on("click",function(aj){window.location="/product";aj.preventDefault()});if(k.indexOf("brand")==-1&&k.indexOf("catalog")==-1){i.css("visibility","hidden")}if($("#productList-table").length>0){i.css("visibility","visible")}$(".number").attr({type:"number",min:0,step:0.01});var P=$("#product");P.find("label").wrap('<div class="form-group"></div>');var n=$("#back-to-top");$(window).scroll(function(){if($(this).scrollTop()>350){n.fadeIn()}else{n.fadeOut()}});n.on("click",function(){$("#back-to-top").tooltip("hide");$("body, html").animate({scrollTop:0},800);return false});n.tooltip("show");$(".product-price").each(function(){var aj=$(this).text().split(".");var al=!isNaN(aj[0])?parseInt(aj[0]):"",ak=!isNaN(aj[1])?parseInt(aj[1]):"";if(al&&ak){$(this).text(al+" грн. "+ak+" коп.")}else{if(al){$(this).text(al+"  грн.")}else{if(ak){$(this).text(ak+" коп.")}else{$(this).text("")}}}});var H=$("img.lazy");if(H.length>0){H.lazyload({effect:"fadeIn"})}P.on("submit",function(){var aj=P.find("textarea");if(aj.val()==""){aj.val("empty")}})});