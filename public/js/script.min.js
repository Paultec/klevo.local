$(function(){var e=window.localStorage.getItem("close");if(e===null){$("body").prepend('<p id="dummy" class="text-center" style="background-color: #cc0000; color: #ffff00; font-weight: bold; padding: 5px 0;  position: relative">Сайт в разработке, спасибо за понимание. <span class="glyphicon glyphicon-remove" style="cursor: pointer; position: absolute; top: 8px; right: 10px"></span></p>')}$("#dummy").find("span").on("click",function(){$("#dummy").slideUp();window.localStorage.setItem("close","yes")});(function(){var ae=$(".horizontal-nav");ae.find("a").hover(function(){$(this).css({color:"#563D7C"}).children().css({color:"#428BCA"})},function(){$(this).css({color:"#428BCA"}).children().css({color:"#563D7C"})});var ac=["glyphicon-home","glyphicon-picture","glyphicon-pencil","glyphicon-comment","glyphicon-shopping-cart","glyphicon-earphone"];var af=$(".nav:first").find("li").find("a");af.each(function(ah){$(this).prepend('<i class="glyphicon '+ac[ah]+'"></i> ')});ae.find("li.active").addClass("outline-outward");ag();$(window).on("resize",function(){ag()});var ad=$(".grub-data");ad.appendTo($(".main-nav"));ad.children().unwrap();$("ul.nav").find("li.dropdown").hover(function(){$(".dropdown-menu",this).fadeIn()},function(){$(".dropdown-menu",this).fadeOut()});$(".bottom-nav").find("li").find("a").removeClass("float-shadow");function ag(){var ah=$("#main-navigation"),ai=$(".navbar-toggle").is(":visible");if(ai){ah.find("li.active").removeClass("outline-outward").end().find("a").removeClass("float-shadow")}else{ah.find("li.active").addClass("outline-outward").end().find("a").addClass("float-shadow")}}})();var n=$(".items");if(n.length>0){n.mosaic({animation:"slide"})}(function(){$(".accordion").each(function(){$(this).accordion({header:$(this).children("h3"),active:false,collapsible:true,heightStyle:"content"})});var ad=$(".scroll-to-content");if(ad.is(":visible")){var ac=window.location;if(ac.pathname!="/"&&ac.hash!="content"){ac.href+="#content"}}})();(function(){$.expr[":"].contains=function(ae,af,ad){return(ae.textContent||ae.innerText||"").toUpperCase().indexOf(ad[3].toUpperCase())>=0};function ac(ag,af){var ae=$("<form>").attr({"class":"filter-form",action:"#"}),ad=$("<input>").attr({"class":"filter-input form-control",type:"search",placeholder:"Фильтровать"});$(ae).append(ad).appendTo(ag);$(ad).change(function(){var ah=$(this).val();if(ah){var ai=$(af).find("a:contains("+ah+")").parent();$(".filter-item",af).not(ai).addClass("hide");ai.removeClass("hide")}else{$(af).find(".filter-item").removeClass("hide")}return false}).keyup(function(){$(this).change()})}ac($("#form-filter"),$(".ui-accordion-content"));$(".filter-form").on("submit",function(ad){ad.preventDefault()});$(".accordion").filter(":last-child").on("click",function(){$(".filter-item").removeClass("hide");$(".filter-input").val("")})})();$(window).on("hashchange",function(ac){var ad=window.location.hash.replace(/^#\/?/,"");if(document.getElementById(ad)){$.smoothScroll({scrollTarget:"#"+ad})}});$(window).trigger("hashchange");var T=$("#auth_btn");var d=/^[\w\.=-]+@[\w\.-]+\.[\w]{2,6}$/i,m=/^[a-zA-z][a-zA-Z1-9]{7,20}$/i;var r=false,y=false;var O=$("#identity"),Y=$("#credential");O.on("change",function(){var ac=$(this).val();r=d.test(ac);if(r){$(this).css("border","1px solid green")}else{$(this).css("border","1px solid red")}});Y.on("change",function(){var ac=$(this).val();y=m.test(ac);if(y){$(this).css("border","1px solid green")}else{$(this).css("border","1px solid red")}});var aa=$(".register_form");aa.find("label").eq(0).attr("for","email").next().attr({id:"email",type:"email",placeholder:"Введите Email"});aa.find("label").eq(1).attr("for","password").next().attr({id:"password",placeholder:"Введите Пароль"});aa.find("label").eq(2).attr("for","passwordVerify").next().attr({id:"passwordVerify",placeholder:"Повторите Пароль"});var R=aa.find("button");var A=false,x=false;var B=$("#password"),Q=$("#passwordVerify");$("#email").on("keyup",function(){var ac=$(this).val();A=d.test(ac);if(A){$(this).css("border","1px solid green")}else{$(this).css("border","1px solid red")}});B.on("keyup",function(){var ac=$(this).val();x=m.test(ac);if(x){$(this).css("border","1px solid green")}else{$(this).css("border","1px solid red")}});Q.on("keyup",function(){if(x&&B.val()==Q.val()){$(this).css("border","1px solid green");B.css("border","1px solid green")}else{$(this).css("border","1px solid red");B.css("border","1px solid red")}});var K=$(".change_mail_form");K.find("label").eq(0).attr("for","newEmail").next().attr({id:"newEmail",type:"email",placeholder:"Введите Email"});K.find("label").eq(1).attr("for","emailVerify").next().attr({id:"emailVerify",type:"email",placeholder:"Повторите Email"});K.find("label").eq(2).attr("for","password").next().attr({id:"password",placeholder:"Введите Пароль"});var X=$("#change_email");var i=false,F=false;var u=$("#newEmail"),j=$("#emailVerify");u.on("keyup",function(){var ac=$(this).val();i=d.test(ac);if(i){$(this).css("border","1px solid green")}else{$(this).css("border","1px solid red")}});j.on("keyup",function(){if(i&&u.val()==j.val()){$(this).css("border","1px solid green");u.css("border","1px solid green")}else{$(this).css("border","1px solid red");u.css("border","1px solid red")}});$("#password").on("keyup",function(){var ac=$(this).val();F=m.test(ac);if(F){$(this).css("border","1px solid green")}else{$(this).css("border","1px solid red")}});var z=$(".change_pass_form");z.find("label").eq(0).attr("for","oldPass").next().attr({id:"oldPass",type:"password",placeholder:"Текущий пароль"});z.find("label").eq(1).attr("for","newPass").next().attr({id:"newPass",type:"password",placeholder:"Новый пароль"});z.find("label").eq(2).attr("for","passVerify").next().attr({id:"passVerify",placeholder:"Повторите пароль"});var c=$("#change_pass");var b=false,f=false;var J=$("#newPass"),L=$("#passVerify");J.on("keyup",function(){var ac=$(this).val();b=m.test(ac);if(b){$(this).css("border","1px solid green")}else{$(this).css("border","1px solid red")}});L.on("keyup",function(){if(b&&J.val()==L.val()){$(this).css("border","1px solid green");J.css("border","1px solid green")}else{$(this).css("border","1px solid red");J.css("border","1px solid red")}setChangePasswordActive()});$("#oldPass").on("keyup",function(){var ac=$(this).val();f=m.test(ac);if(f){$(this).css("border","1px solid green")}else{$(this).css("border","1px solid red")}});$("form").find("ul").addClass("list-unstyled").find("li").css({color:"#cc0000",background:"#FFDD7A"}).prepend('<span class="glyphicon glyphicon glyphicon-ban-circle"></span> ');$(".logout").on("click",function(){return confirm("Вы действительно хотите выйти из системы?")});$('[data-toggle="tooltip"]').tooltip({animation:true});$(".back").on("click",function(){history.back()});$(".warning").on("click",function(){return confirm("Вы действительно хотите удалить этот элемент, это может привести к нарушению целостности системы! Удалить?")});var ab=$('[name="parent_state"]').val(),t=$(".category_select").find("option"),a=$(".name_input").val();t.each(function(){if(ab==$(this).val()){$(this).css("color","#428BCA").attr("selected",true)}});var G=$('[name="brand_state"]').val(),w=$('[name="supplier_state"]').val(),q=$('[name="catalog_state"]').val(),N=$(".supplier_select").find("option"),P=$(".brand_select").find("option"),Z=t;P.each(function(){if(G==$(this).val()){$(this).css("color","#428BCA").attr("selected",true)}});Z.each(function(){if(q==$(this).val()){$(this).css("color","#428BCA").attr("selected",true)}});N.each(function(){if(w==$(this).val()){$(this).css("color","#428BCA").attr("selected",true)}});$(".hide_row").addClass("text-muted").find("a").css("opacity",0.4).end().find(".show-hide").html('<span class="glyphicon glyphicon glyphicon-eye-open"></span> Показать');var H=$(".form_wrap").find('[type="file"]').val(""),S=$(".excel-file-button").attr("disabled",true);H.on("change",function(){if($(this).val().indexOf(".xls")>0||$(this).val().indexOf(".xlsx")>0){v()}else{S.attr("disabled",true)}});function v(){S.attr("disabled",false)}var W=$(".img-file-button").attr("disabled",true);H.on("change",function(){if($(this).val().indexOf(".png")>0||$(this).val().indexOf(".jpeg")>0||$(this).val().indexOf(".jpg")>0){o()}else{W.attr("disabled",true)}});function o(){W.attr("disabled",false)}if(location.href.indexOf("q")>0){var s=window.location.href;var U=s.slice(s.indexOf("=")+1,s.length);var I=decodeURIComponent(U).replace(/\+/g," ");$(".search-input").val(I)}(function(){$(".search-input").on("keyup",function(){var ae=$.trim($(this).val()),ad=ae.length;if(ad>4){$.ajax({type:"POST",url:"/search/pre-search",data:{str:ae}}).done(function(ai){if(ai.result.length>0&&ad>4){var af=ac();var ak=af.left,aj=af.top,ag=af.width;var ah=$(".pre-search");if(ah.length>0){ah.remove()}$('<ul class="list-unstyled pre-search hide"></ul>').css({position:"absolute","z-index":9999,top:aj+"px",left:ak+"px",width:ag+"px",background:"#fff"}).appendTo("body");var al=JSON.parse(ai.result);$(al).each(function(am,an){if(an.img==null){an.img="noimage.png"}ah=$(".pre-search").append('<li class="product"><a class="set-product-in-store store-href" href="/product/'+an.translit+'.html"><img class="store-img" width="65" src="/img/product/min/'+an.img+'">'+an.name+"</a></li>")});if(ah.find("li").length>1){$(".search-input").addClass("bottom-radius-remove");ah.removeClass("hide").append('<a class="text-right" href="/search?q='+ae+'">Показать все результаты &gt;&gt;</a>')}}}).fail(function(){}).always(function(){})}$("body").on("click",function(){$(".pre-search").fadeOut("fast").remove();$(".search-input").removeClass("bottom-radius-remove")});function ac(){var af=$(".search-input"),ag=af.offset();return{left:ag.left,top:ag.top+34,width:af.width()+25}}$(window).on("resize",function(){var af=ac();var ai=af.left,ah=af.top,ag=af.width;$(".pre-search").css({top:ah+"px",left:ai+"px",width:ag+"px"})})})})();var D=$(".filter-criteria");(function(){var ac=D.find("a"),ad=[];if(ac.length<2){return}ac.each(function(){ad.reverse(ad.push($(this).data("link")))}).each(function(ae){$(this).attr("href",$(this).attr("href")+"/"+ad[ae])})})();$(".product-list").on("click",function(ac){window.location="/product";ac.preventDefault()});$(".number").attr({type:"number",min:0,step:0.01});var M=$("#product");M.find("label").wrap('<div class="form-group"></div>');var l=$("#back-to-top");$(window).scroll(function(){if($(this).scrollTop()>350){l.fadeIn()}else{l.fadeOut()}});l.on("click",function(){$("#back-to-top").tooltip("hide");$("body, html").animate({scrollTop:0},800);return false});l.tooltip("show");$(".product-price").each(function(){var ac=$(this).text().split(".");var ae=!isNaN(ac[0])?parseInt(ac[0]):"",ad=!isNaN(ac[1])?parseInt(ac[1]):"";if(ae&&ad){$(this).text(ae+" грн. "+ad+" коп.")}else{if(ae){$(this).text(ae+"  грн.")}else{if(ad){$(this).text(ad+" коп.")}else{$(this).text("")}}}});var E=$("img.lazy");if(E.length>0){E.lazyload({effect:"fadeIn"})}M.on("submit",function(){var ac=M.find("textarea");if(ac.val()==""){ac.val("empty")}});var p=$(".first-search-page");p.on("click",function(ae){var ac=window.location.href;var ad=ac.slice(ac.indexOf("?"),ac.length);window.location.href=$(this).attr("href")+ad;ae.preventDefault()});(function(){var ad=$(".zoom"),ac=$(".product-image").find("img");ac.hover(function(){ad.stop(true,true).animate({top:"20px",left:"20px","font-size":"48px"})},function(){ad.stop(true,true).animate({top:"5px",left:"5px","font-size":"28px"},function(){ad.removeAttr("style")})});ad.on("mouseenter",function(){$(this).stop()}).on("click",function(){ac.trigger("mouseleave")})})();var g=new Object();var C={init:function(ae){g=$.extend({},this,C);g.searching=false;g.o=new Object();var ac={overlaySelector:".md-overlay",closeSelector:".md-close",classAddAfterOpen:"md-show",modalAttr:"data-modal",perspectiveClass:"md-perspective",perspectiveSetClass:"md-setperspective",afterOpen:function(af,ag){},afterClose:function(af,ag){}};g.o=$.extend({},ac,ae);g.n=new Object();var ad=$(g.o.overlaySelector);$(this).click(function(){var ah=$("#"+$(this).attr(g.o.modalAttr)),aj=$(g.o.closeSelector,ah);var ag=$(this);$(ah).addClass(g.o.classAddAfterOpen);$(ad).on("click",function(){af();g.afterClose(ag,ah);$(ad).off("click")});if($(ag).hasClass(g.o.perspectiveSetClass)){setTimeout(function(){$(document.documentElement).addClass(g.o.perspectiveClass)},25)}g.afterOpen(ag,ah);function ai(ak){$(ah).removeClass(g.o.classAddAfterOpen);if(ak){$(document.documentElement).removeClass(g.o.perspectiveClass)}}function af(){ai($(ag).hasClass(g.o.perspectiveSetClass))}$(aj).on("click",function(ak){ak.stopPropagation();af();location.hash="";g.afterClose(ag,ah)})})},afterOpen:function(ac,ad){g.o.afterOpen(ac,ad)},afterClose:function(ac,ad){g.o.afterClose(ac,ad)}};$.fn.modalEffects=function(ac){if(C[ac]){return C[ac].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof ac==="object"||!ac){return C.init.apply(this,arguments)}else{$.error("Method "+ac+" does not exist on jQuery.modalEffects")}}};function k(){return !!("ontouchstart" in window)?1:0}var h=$(".md-trigger");h.modalEffects({afterClose:function(ac,ad){$(".md-trigger").removeClass("highlighted");$(ac).addClass("highlighted");$("#afterclose").removeClass("invisible").html('Just closed modal: "'+$(ac).html()+'"');setTimeout(function(){$(ac).removeClass("highlighted");$("#afterclose").addClass("invisible")},3000);$(".one-click-buy-number").val(1)}});h.on("click",function(ac){ac.preventDefault()});(function(){var af=9,ag;var ad=0,ae=0;$(".one-click-buy").on("click",function(){var ah=$(this).parents(".product").find("h5").text();var ai=$(this).prev().prev(".id").val();ag=$(this).prev(".qty").val();$(".one-click-buy-product-name").text(ah);$(".one-click-buy-product-input-id").val(ai);$(".one-click-buy-number").prop("max",ag).on("change scroll",function(){$(".one-click-buy-product-input-qty").val($(this).val())});$(".one-click-buy-input").on("keypress",function(aj){return !(/\D/.test(String.fromCharCode(aj.charCode)))}).on("keyup",function(){var aj=$(this);if(aj.val().length>af){aj.val(aj.val().substr(0,af))}})});var ac=$(".one-click-buy-form").find("form");ac.on("submit",function(ah){ad=$(".one-click-buy-number").val();ae=$(".one-click-buy-input").val().length;if(ad>ag||ad<=0){if($("#informer").length==0){ac.prepend('<p id="informer" class="text-danger text-center">Проверьте введенные данные.</p>')}ah.preventDefault()}else{if(ae==0||ae!=af){if($("#informer").length==0){ac.prepend('<p id="informer" class="text-danger text-center">Проверьте введенные данные.</p>')}ah.preventDefault()}}});$(".one-click-buy-submit-from-cart").on("click",function(ah){$(".address-buy-input").remove();$(".checkout-click-buy-input").remove();ae=$(".one-click-buy-input-from-cart").val().length;if(ae==0||ae!=af){if($("#informer").length==0){$(".one-click-buy").before('<p id="informer" class="text-danger text-center">Проверьте введенные данные.</p>')}ah.preventDefault()}})})();(function(){var ad=9,ac=0;$(".order-product").on("click",function(){var af=$(this).prev().prev(".id").val();var ae=$(this).parents(".product").find("h5").text()||$(".product-name").text();$(".order-product-name").text(ae);$(".order-product-input-id").val(af);$(".order-input").on("keyup",function(){var ag=$(this);if(ag.val().length>ad){ag.val(ag.val().substr(0,ad))}});$(".order-submit").on("click",function(ag){ac=$(".order-input").val().length;if(ac==0||ac!=ad){if($("#informer").length==0){$(".order-info").after('<p id="informer" class="text-danger text-center">Проверьте введенные данные.</p>')}ag.preventDefault()}})})})();(function(){var ac=$(".add-to-cart");ac.on("submit",function(ae){ae.preventDefault();var af=$(this).parent().find(".id").val(),ad=$(".btn");$.ajax({type:"POST",url:"/cart/add",data:{id:af},beforeSend:function(){ad.prop("disabled",true)}}).done(function(ag){if(ag.info!=="error"){var ah=$(".items-in-cart");ah.text(parseInt(ah.text())+1);$(".product-"+ag.id).find(".add-to-cart-btn").remove().end().find(".ajax-btn").removeClass("hide").end().next().remove()}}).fail(function(){}).always(function(){ad.prop("disabled",false)})})})();(function(){$(".remove-all").on("click",function(){var ac=confirm("Вы действительно хотите удалить все товары из корзины?");if(ac){$(".one-click-buy-input").prop("required",false);$(".checkout-click-buy-input").prop("required",false);$(".address-buy-input").prop("required",false)}return ac})})();(function(){$(".cart-item-remove").on("click",function(){$(".one-click-buy-input").prop("required",false);$(".checkout-click-buy-input").prop("required",false);$(".address-buy-input").prop("required",false)})})();(function(){V();$(".cart-product-qty").on("change",function(){var ad=$(this).next().data("price");if(ad!=undefined){var ac=($(this).find("input").val()===""||$(this).find("input").val()<1)?1:$(this).find("input").val();var af=(parseFloat(ad)*parseFloat(ac))/100;var ae=af.toString().split(".");var ah=parseInt(ae[0]),ag=parseInt(ae[1]);if(ah&&ag){$(this).next().text(ah+" грн. "+ag+" коп.")}else{if(ah){$(this).next().text(ah+"  грн.")}else{if(ag){$(this).next().text(ag+" коп.")}else{$(this).next().text("")}}}}V()})})();function V(){var ac=$(".cart-from");var ak=[],af=[];ac.find(".cart-product-qty").each(function(){if($(this).val()!=""){ak.push(parseInt($(this).val()))}});ac.find(".cart-product-price").each(function(){af.push($(this).data("price"))});var aj=0;for(var ag=0,ah=ak.length;ag<ah;ag++){aj+=ak[ag]*af[ag]}aj/=100;var ad=aj.toString().split(".");var ae=parseInt(ad[0]),ai=parseInt(ad[1]);if(ae&&ai){$(".total-sum").text(ae+" грн. "+ai+" коп.")}else{if(ae){$(".total-sum").text(ae+"  грн.")}else{if(ai){$(".total-sum").text(ai+" коп.")}else{$(".total-sum").text("")}}}}(function(){var ac=$(".btn-breadcrumb"),af=$(".step.hover"),ag="step-1";var ae=9;ac.find(".btn").on("click",function(){ac.find(".btn").removeClass("hover");$(this).addClass("hover");ag=$(this).data("step");$(".step").css("display","none");$("."+ag).css("display","block")});$(".checkout-click-buy-input").on("keypress",function(ah){return !(/\D/.test(String.fromCharCode(ah.charCode)))}).on("keyup",function(){var ah=$(this);if(ah.val().length>ae){ah.val(ah.val().substr(0,ae))}});var ad=0;$(".checkout-click-buy-submit").on("click",function(ah){ad=$(".checkout-click-buy-input").val().length;if(ad==0||ad!=ae){if($("#informer").length==0){$(".btn-breadcrumb").after('<p id="informer" class="text-danger text-center">Проверьте введенные данные.</p>')}ah.preventDefault()}});$(".next-step").on("click",function(){var ah=$(".btn.hover").data("step");if(ah=="step-1"){ac.find(".btn").removeClass("hover");ac.find(".btn").eq(1).addClass("hover");$(".step").css("display","none");$(".step-2").css("display","block")}else{if(ah=="step-2"){ac.find(".btn").removeClass("hover");ac.find(".btn").eq(2).addClass("hover");$(".step").css("display","none");$(".step-3").css("display","block")}}})})();(function(){var ac=255;$(".comment-textarea").on("keyup",function(){var ad=$(this);if(ad.val().length>ac){ad.val(ad.val().substr(0,ac))}$(".textarea-length-counter").find("span").text(ad.val().length)})})();(function(){$(".checkout-click-buy-submit").on("click",function(){$(".one-click-buy-input").prop("required",false)})})();(function(){var ad=9;var ac=$(".order-form"),ae=$(".order-phone");ae.on("keyup",function(){var af=$(this);if(af.val().length>ad){af.val(af.val().substr(0,ad))}});ac.on("submit",function(ag){var af=ae.val().length;if(af==0||af!=ad){if($("#informer").length==0){ac.prepend('<p id="informer" class="text-danger text-center">Проверьте введенные данные.</p>')}ag.preventDefault()}})})();$(".activate-indicators").find("li").first().addClass("active");$(".activate-carousel").find("div").first().addClass("active");(function(){var ae=$(".gallery-image-input");ae.on("change",function(){$(".gallery-informer").remove();if($(this).val().indexOf(".png")>0||$(this).val().indexOf(".jpeg")>0||$(this).val().indexOf(".jpg")>0){$('[type="submit"]').prop("disabled",false)}else{$('[type="submit"]').prop("disabled",true);$(this).parents("form").before('<p class="text-danger gallery-informer">Только изображение (jpeg/jpg или png)</p>')}});var ac=/File has an incorrect mimetype.*/i;var ad=ae.parents("label").next("ul").find("li");if(ac.test(ad.text())){ad.html('<span class="glyphicon glyphicon glyphicon-ban-circle"></span> Недопустимый тип файла')}})();(function(){var ad=9;var ac=$(".personal-data"),ae=$("#user-phone");ae.on("keyup",function(){var af=$(this);if(af.val().length>ad){af.val(af.val().substr(0,ad))}}).on("keypress",function(af){return !(/\D/.test(String.fromCharCode(af.charCode)))});$("#user-name").on("keypress",function(af){return(/^[а-яА-я ]+$/.test(String.fromCharCode(af.charCode)))});ac.on("submit",function(ag){var af=ae.val().length;if(af==0||af!=ad){if($("#informer").length==0){ac.prepend('<p id="informer" class="text-danger text-center">Проверьте введенные данные.</p>')}ag.preventDefault()}})})();(function(){$(".toggle-control").on("click",function(){$(".toggle").addClass("hide");var ac=$(this).data("toggle");$("."+ac).removeClass("hide")})})();(function(){var ae=$(".in-storage-delivery"),ad=$(".in-storage-payment");ae.on("change",function(){var ag=$(this).find("option:selected").val();if(ag>0){localStorage.setItem("delivery",ag)}});ad.on("change",function(){var ag=$(this).find("option:selected").val();if(ag>0){localStorage.setItem("payment",ag)}});var af=localStorage.getItem("delivery"),ac=localStorage.getItem("payment");if(af!==null){ae.find("option").each(function(){if($(this).val()==af){$(this).prop("selected",true)}})}if(ac!==null){ad.find("option").each(function(){if($(this).val()==ac){$(this).prop("selected",true)}})}})();(function(){var ac={set:function(ad,ae){return localStorage.setItem(ad,JSON.stringify(ae))},get:function(ad){return JSON.parse(localStorage.getItem(ad))},remove:function(ad){return localStorage.removeItem(ad)},getItem:function(ae,ad){return this.get(ae)[ad]},getLastItem:function(ad){return this.get(ad)[this.getLength(ad)-1]},getLength:function(ad){return this.get(ad).length},removeElement:function(ae,ad){var af=this.get(ae);af.splice(ad,1);this.set(ae,af);return this.get(ae)},removeLast:function(ad){var ae=this.get(ad);ae.pop();this.set(ad,ae);return this.get(ad)}};$(document).on("click",".set-product-in-store",function(){var ad=15;var ai=$(this).parents(".product");var af=ai.find(".store-img").prop("src"),ae=ai.find(".store-href").prop("href");var aj={};aj.img=af.slice(af.lastIndexOf("/"),af.length);aj.href=ae.slice(ae.lastIndexOf("/"),ae.length);aj.name=ai.find(".store-href").text();aj.price=ai.find(".store-price").text();aj.description=ai.find(".store-description").text();var ah=ac.get("viewed")||[];if(ah.length>0){for(var ag=0;ag<ac.getLength("viewed");ag++){if(ah[ag].href==aj.href){ah=ac.removeElement("viewed",ag)}}}ah.unshift(aj);ac.set("viewed",ah);if(ac.getLength("viewed")>ad){ac.removeLast("viewed")}});$(".last-view-toggle").on("click",function(){if(ac.get("viewed")!==null){for(var ae=0,ag=ac.getLength("viewed");ae<ag;ae++){var ad="";var af=ac.get("viewed")[ae];ad+='<div class="last-viewed-product-item product row"><div class="col col-sm-3"><a class="store-href" href="/product'+af.href+'"><img class="img-responsive set-product-in-store store-img" src="/img/product/min'+af.img+'" width="135" alt=""></a></div><div class="col col-sm-9"><h5><a class="set-product-in-store store-href" href="/product'+af.href+'">'+af.name+'</a></h5><p class="store-description">'+af.description+'</p><p class="store-price">'+af.price+"</p></div></div>";$(".last-viewed-products").append(ad)}}else{$(".last-viewed-products").append('<h4 class="text-center">Пока ничего нет.</h4>')}})})();(function(){var ac=$(".feedback-form");ac.on("submit",function(af){var ad=$(".feedback-form-email").val(),ae=$(".feedback-form-subject").val(),ag=$(".feedback-form-text").val();if(!d.test(ad)||!ae||!ag){if($("#informer").length==0){ac.prepend('<p id="informer" class="text-danger text-center">Проверьте введенные данные.</p>')}af.preventDefault()}})})();(function(){var ae=$(".flash-messenger"),ad=ae.find("li").text(),af=null;if(ad!=""){ae.removeClass("hide");ac()}ae.on("click",function(){$(this).fadeOut("slow");clearTimeout(af)});function ac(){af=setTimeout(function(){ae.trigger("click")},8000)}})()});