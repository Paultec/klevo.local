$(function(){var e=window.localStorage.getItem("close");if(e===null){$("body").prepend('<p id="dummy" class="text-center" style="background-color: #cc0000; color: #ffff00; font-weight: bold; padding: 5px 0;  position: relative">Сайт в разработке, спасибо за понимание. <span class="glyphicon glyphicon-remove" style="cursor: pointer; position: absolute; top: 8px; right: 10px"></span></p>')}$("#dummy").find("span").on("click",function(){$("#dummy").slideUp();window.localStorage.setItem("close","yes")});(function(){var aj=$(".horizontal-nav");aj.find("a").hover(function(){$(this).css({color:"#563D7C"}).children().css({color:"#428BCA"})},function(){$(this).css({color:"#428BCA"}).children().css({color:"#563D7C"})});var ah=["glyphicon-home","glyphicon-picture","glyphicon-pencil","glyphicon-comment","glyphicon-shopping-cart","glyphicon-earphone"];var ak=$(".nav:first").find("li").find("a");ak.each(function(am){$(this).prepend('<i class="glyphicon '+ah[am]+'"></i> ')});aj.find("li.active").addClass("outline-outward");al();$(window).on("resize",function(){al()});var ai=$(".grub-data");ai.appendTo($(".main-nav"));ai.children().unwrap();$("ul.nav").find("li.dropdown").hover(function(){$(".dropdown-menu",this).fadeIn()},function(){$(".dropdown-menu",this).fadeOut()});$(".bottom-nav").find("li").find("a").removeClass("float-shadow");function al(){var am=$("#main-navigation"),an=$(".navbar-toggle").is(":visible");if(an){am.find("li.active").removeClass("outline-outward").end().find("a").removeClass("float-shadow")}else{am.find("li.active").addClass("outline-outward").end().find("a").addClass("float-shadow")}}})();var q=$(".items");if(q.length>0){q.mosaic({animation:"slide"})}(function(){$(".accordion").each(function(){$(this).accordion({header:$(this).children("h3"),active:false,collapsible:true,heightStyle:"content"})});var ai=$(".scroll-to-content");if(ai.is(":visible")){var ah=window.location;if(ah.pathname!="/"&&ah.hash!="content"){ah.href+="#content"}}})();(function(){$.expr[":"].contains=function(aj,ak,ai){return(aj.textContent||aj.innerText||"").toUpperCase().indexOf(ai[3].toUpperCase())>=0};function ah(al,ak){var aj=$("<form>").attr({"class":"filter-form",action:"#"}),ai=$("<input>").attr({"class":"filter-input form-control",type:"search",placeholder:"Фильтровать"});$(aj).append(ai).appendTo(al);$(ai).change(function(){var am=$(this).val();if(am){var an=$(ak).find("a:contains("+am+")").parent();$(".filter-item",ak).not(an).addClass("hide");an.removeClass("hide")}else{$(ak).find(".filter-item").removeClass("hide")}return false}).keyup(function(){$(this).change()})}ah($("#form-filter"),$(".ui-accordion-content"));$(".filter-form").on("submit",function(ai){ai.preventDefault()});$(".accordion").filter(":last-child").on("click",function(){$(".filter-item").removeClass("hide");$(".filter-input").val("")})})();$(window).on("hashchange",function(ah){var ai=window.location.hash.replace(/^#\/?/,"");if(document.getElementById(ai)){$.smoothScroll({scrollTarget:"#"+ai})}});$(window).trigger("hashchange");var Y=$("#auth_btn");var d=/^[\w\.=-]+@[\w\.-]+\.[\w]{2,6}$/i,p=/^[a-zA-z][a-zA-Z1-9]{7,20}$/i;var u=false,C=false;var T=$("#identity"),ad=$("#credential");T.on("change",function(){var ah=$(this).val();u=d.test(ah);if(u){$(this).css("border","1px solid green")}else{$(this).css("border","1px solid red")}});ad.on("change",function(){var ah=$(this).val();C=p.test(ah);if(C){$(this).css("border","1px solid green")}else{$(this).css("border","1px solid red")}});var af=$(".register_form").add(".form_reset");af.find("label").eq(0).attr("for","email").next().attr({id:"email",type:"email",placeholder:"Введите Email"});af.find("label").eq(1).attr("for","password").next().attr({id:"password",placeholder:"Введите Пароль"});af.find("label").eq(2).attr("for","passwordVerify").next().attr({id:"passwordVerify",placeholder:"Повторите Пароль"});var W=af.find("button");var E=false,B=false;var F=$("#password"),V=$("#passwordVerify");$("#email").on("keyup",function(){var ah=$(this).val();E=d.test(ah);if(E){$(this).css("border","1px solid green")}else{$(this).css("border","1px solid red")}});F.on("keyup",function(){var ah=$(this).val();B=p.test(ah);if(B){$(this).css("border","1px solid green")}else{$(this).css("border","1px solid red")}});V.on("keyup",function(){if(B&&F.val()==V.val()){$(this).css("border","1px solid green");F.css("border","1px solid green")}else{$(this).css("border","1px solid red");F.css("border","1px solid red")}});var j=/The two given tokens do not match/i,S=/The email address you entered was not found/i,l=/A record matching the input was found/i,o=/Authentication failed. Please try again/i;var A=$("form").find("li");if(j.test(A.text())){A.html(" Пароль не совпадает")}if(S.test(A.text())){A.html(" Адрес электронной почты не найден")}if(l.test(A.text())){A.html(" Уже есть пользователь с таким Email")}if(o.test(A.text())){A.html(" Ошибка аутентификации либо email не подтвержден. Пожалуйста, попробуйте еще раз")}var O=$(".change_mail_form");O.find("label").eq(0).attr("for","newEmail").next().attr({id:"newEmail",type:"email",placeholder:"Введите Email"});O.find("label").eq(1).attr("for","emailVerify").next().attr({id:"emailVerify",type:"email",placeholder:"Повторите Email"});O.find("label").eq(2).attr("for","password").next().attr({id:"password",placeholder:"Введите Пароль"});var ac=$("#change_email");var i=false,K=false;var x=$("#newEmail"),k=$("#emailVerify");x.on("keyup",function(){var ah=$(this).val();i=d.test(ah);if(i){$(this).css("border","1px solid green")}else{$(this).css("border","1px solid red")}});k.on("keyup",function(){if(i&&x.val()==k.val()){$(this).css("border","1px solid green");x.css("border","1px solid green")}else{$(this).css("border","1px solid red");x.css("border","1px solid red")}});$("#password").on("keyup",function(){var ah=$(this).val();K=p.test(ah);if(K){$(this).css("border","1px solid green")}else{$(this).css("border","1px solid red")}});var D=$(".change_pass_form");D.find("label").eq(0).attr("for","oldPass").next().attr({id:"oldPass",type:"password",placeholder:"Текущий пароль"});D.find("label").eq(1).attr("for","newPass").next().attr({id:"newPass",type:"password",placeholder:"Новый пароль"});D.find("label").eq(2).attr("for","passVerify").next().attr({id:"passVerify",placeholder:"Повторите пароль"});var c=$("#change_pass");var b=false,f=false;var N=$("#newPass"),P=$("#passVerify");N.on("keyup",function(){var ah=$(this).val();b=p.test(ah);if(b){$(this).css("border","1px solid green")}else{$(this).css("border","1px solid red")}});P.on("keyup",function(){if(b&&N.val()==P.val()){$(this).css("border","1px solid green");N.css("border","1px solid green")}else{$(this).css("border","1px solid red");N.css("border","1px solid red")}setChangePasswordActive()});$("#oldPass").on("keyup",function(){var ah=$(this).val();f=p.test(ah);if(f){$(this).css("border","1px solid green")}else{$(this).css("border","1px solid red")}});$("form").find("ul").addClass("list-unstyled").find("li").css({color:"#cc0000",background:"#FFDD7A"}).prepend('<span class="glyphicon glyphicon-ban-circle"></span> ');$(".logout").on("click",function(){return confirm("Вы действительно хотите выйти из системы?")});$('[data-toggle="tooltip"]').tooltip({animation:true});$(".back").on("click",function(){history.back()});$(".warning").on("click",function(){return confirm("Вы действительно хотите удалить этот элемент, это может привести к нарушению целостности системы! Удалить?")});var ag=$('[name="parent_state"]').val(),w=$(".category_select").find("option"),a=$(".name_input").val();w.each(function(){if(ag==$(this).val()){$(this).css("color","#428BCA").attr("selected",true)}});var J=$('[name="brand_state"]').val(),z=$('[name="supplier_state"]').val(),t=$('[name="catalog_state"]').val(),R=$(".supplier_select").find("option"),U=$(".brand_select").find("option"),ae=w;U.each(function(){if(J==$(this).val()){$(this).css("color","#428BCA").attr("selected",true)}});ae.each(function(){if(t==$(this).val()){$(this).css("color","#428BCA").attr("selected",true)}});R.each(function(){if(z==$(this).val()){$(this).css("color","#428BCA").attr("selected",true)}});$(".hide_row").addClass("text-muted").find("a").css("opacity",0.4).end().find(".show-hide").html('<span class="glyphicon glyphicon glyphicon-eye-open"></span> Показать');var L=$(".form_wrap").find('[type="file"]').val(""),X=$(".excel-file-button").attr("disabled",true);L.on("change",function(){if($(this).val().indexOf(".xls")>0||$(this).val().indexOf(".xlsx")>0){y()}else{X.attr("disabled",true)}});function y(){X.attr("disabled",false)}var ab=$(".img-file-button").attr("disabled",true);L.on("change",function(){if($(this).val().indexOf(".png")>0||$(this).val().indexOf(".jpeg")>0||$(this).val().indexOf(".jpg")>0){r()}else{ab.attr("disabled",true)}});function r(){ab.attr("disabled",false)}if(location.href.indexOf("q")>0){var v=window.location.href;var Z=v.slice(v.indexOf("=")+1,v.length);var M=decodeURIComponent(Z).replace(/\+/g," ");$(".search-input").val(M)}(function(){$(".search-input").on("keyup",function(){var aj=$.trim($(this).val()),ai=aj.length;if(ai>4){$.ajax({type:"POST",url:"/search/pre-search",data:{str:aj}}).done(function(an){if(an.result.length>0&&ai>4){var ak=ah();var ap=ak.left,ao=ak.top,al=ak.width;var am=$(".pre-search");if(am.length>0){am.remove()}$('<ul class="list-unstyled pre-search hide"></ul>').css({position:"absolute","z-index":9999,top:ao+"px",left:ap+"px",width:al+"px",background:"#fff"}).appendTo("body");var aq=JSON.parse(an.result);$(aq).each(function(ar,at){if(at.img==null){at.img="noimage.png"}am=$(".pre-search").append('<li class="product"><a class="set-product-in-store store-href" href="/product/'+at.translit+'.html"><img class="store-img" width="65" src="/img/product/min/'+at.img+'">'+at.name+"</a></li>")});if(am.find("li").length>1){$(".search-input").addClass("bottom-radius-remove");am.removeClass("hide").append('<a class="text-right" href="/search?q='+aj+'">Показать все результаты &gt;&gt;</a>')}}}).fail(function(){}).always(function(){})}$("body").on("click",function(){$(".pre-search").fadeOut("fast").remove();$(".search-input").removeClass("bottom-radius-remove")});function ah(){var ak=$(".search-input"),al=ak.offset();return{left:al.left,top:al.top+34,width:ak.width()+25}}$(window).on("resize",function(){var ak=ah();var an=ak.left,am=ak.top,al=ak.width;$(".pre-search").css({top:am+"px",left:an+"px",width:al+"px"})})})})();var H=$(".filter-criteria");(function(){var ah=H.find("a"),ai=[];if(ah.length<2){return}ah.each(function(){ai.reverse(ai.push($(this).data("link")))}).each(function(aj){$(this).attr("href",$(this).attr("href")+"/"+ai[aj])})})();$(".product-list").on("click",function(ah){window.location="/product";ah.preventDefault()});$(".number").attr({type:"number",min:0,step:0.01});var Q=$("#product");Q.find("label").wrap('<div class="form-group"></div>');var n=$("#back-to-top");$(window).scroll(function(){if($(this).scrollTop()>350){n.fadeIn()}else{n.fadeOut()}});n.on("click",function(){$("#back-to-top").tooltip("hide");$("body, html").animate({scrollTop:0},800);return false});n.tooltip("show");$(".product-price").each(function(){var ah=$(this).text().split(".");var aj=!isNaN(ah[0])?parseInt(ah[0]):"",ai=!isNaN(ah[1])?parseInt(ah[1]):"";if(aj&&ai){$(this).text(aj+" грн. "+ai+" коп.")}else{if(aj){$(this).text(aj+"  грн.")}else{if(ai){$(this).text(ai+" коп.")}else{$(this).text("")}}}});var I=$("img.lazy");if(I.length>0){I.lazyload({effect:"fadeIn"})}Q.on("submit",function(){var ah=Q.find("textarea");if(ah.val()==""){ah.val("empty")}});var s=$(".first-search-page");s.on("click",function(aj){var ah=window.location.href;var ai=ah.slice(ah.indexOf("?"),ah.length);window.location.href=$(this).attr("href")+ai;aj.preventDefault()});(function(){var ai=$(".zoom"),ah=$(".product-image").find("img");ah.hover(function(){ai.stop(true,true).animate({top:"20px",left:"20px","font-size":"48px"})},function(){ai.stop(true,true).animate({top:"5px",left:"5px","font-size":"28px"},function(){ai.removeAttr("style")})});ai.on("mouseenter",function(){$(this).stop()}).on("click",function(){ah.trigger("mouseleave")})})();var g=new Object();var G={init:function(aj){g=$.extend({},this,G);g.searching=false;g.o=new Object();var ah={overlaySelector:".md-overlay",closeSelector:".md-close",classAddAfterOpen:"md-show",modalAttr:"data-modal",perspectiveClass:"md-perspective",perspectiveSetClass:"md-setperspective",afterOpen:function(ak,al){},afterClose:function(ak,al){}};g.o=$.extend({},ah,aj);g.n=new Object();var ai=$(g.o.overlaySelector);$(this).click(function(){var am=$("#"+$(this).attr(g.o.modalAttr)),ao=$(g.o.closeSelector,am);var al=$(this);$(am).addClass(g.o.classAddAfterOpen);$(ai).on("click",function(){ak();g.afterClose(al,am);$(ai).off("click")});if($(al).hasClass(g.o.perspectiveSetClass)){setTimeout(function(){$(document.documentElement).addClass(g.o.perspectiveClass)},25)}g.afterOpen(al,am);function an(ap){$(am).removeClass(g.o.classAddAfterOpen);if(ap){$(document.documentElement).removeClass(g.o.perspectiveClass)}}function ak(){an($(al).hasClass(g.o.perspectiveSetClass))}$(ao).on("click",function(ap){ap.stopPropagation();ak();location.hash="";g.afterClose(al,am)})})},afterOpen:function(ah,ai){g.o.afterOpen(ah,ai)},afterClose:function(ah,ai){g.o.afterClose(ah,ai)}};$.fn.modalEffects=function(ah){if(G[ah]){return G[ah].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof ah==="object"||!ah){return G.init.apply(this,arguments)}else{$.error("Method "+ah+" does not exist on jQuery.modalEffects")}}};function m(){return !!("ontouchstart" in window)?1:0}var h=$(".md-trigger");h.modalEffects({afterClose:function(ah,ai){$(".md-trigger").removeClass("highlighted");$(ah).addClass("highlighted");$("#afterclose").removeClass("invisible").html('Just closed modal: "'+$(ah).html()+'"');setTimeout(function(){$(ah).removeClass("highlighted");$("#afterclose").addClass("invisible")},3000);$(".one-click-buy-number").val(1)}});h.on("click",function(ah){ah.preventDefault()});(function(){var ak=9,al;var ai=0,aj=0;$(".one-click-buy").on("click",function(){var am=$(this).parents(".product").find("h5").text();var an=$(this).prev().prev(".id").val();al=$(this).prev(".qty").val();if($(".items-in-cart").text()!=0){$(".cart-product-exists").removeClass("hide")}$(".one-click-buy-product-name").text(am);$(".one-click-buy-product-input-id").val(an);$(".one-click-buy-number").prop("max",al).on("change scroll",function(){$(".one-click-buy-product-input-qty").val($(this).val())});$(".one-click-buy-input").on("keypress",function(ao){return !(/\D/.test(String.fromCharCode(ao.charCode)))}).on("keyup",function(){var ao=$(this);if(ao.val().length>ak){ao.val(ao.val().substr(0,ak))}})});var ah=$(".one-click-buy-form").find("form");ah.on("submit",function(am){ai=parseInt($(".one-click-buy-number").val());aj=parseInt($(".one-click-buy-input").val().length);if(ai>al||ai<=0){if($("#informer").length==0){ah.prepend('<p id="informer" class="text-danger text-center">Проверьте введенные данные.</p>')}am.preventDefault()}else{if(aj==0||aj!=ak){if($("#informer").length==0){ah.prepend('<p id="informer" class="text-danger text-center">Проверьте введенные данные.</p>')}am.preventDefault()}}});$(".one-click-buy-submit-from-cart").on("click",function(am){$(".address-buy-input").remove();$(".checkout-click-buy-input").remove();aj=$(".one-click-buy-input-from-cart").val().length;if(aj==0||aj!=ak){if($("#informer").length==0){$(".one-click-buy").before('<p id="informer" class="text-danger text-center">Проверьте введенные данные.</p>')}am.preventDefault()}})})();(function(){var ai=9,ah=0;$(".order-product").on("click",function(){var ak=$(this).prev().prev(".id").val();var aj=$(this).parents(".product").find("h5").text()||$(".product-name").text();if($(".items-in-cart").text()!=0){$(".cart-product-exists").removeClass("hide")}$(".order-product-name").text(aj);$(".order-product-input-id").val(ak);$(".order-input").on("keyup",function(){var al=$(this);if(al.val().length>ai){al.val(al.val().substr(0,ai))}});$(".order-submit").on("click",function(al){ah=$(".order-input").val().length;if(ah==0||ah!=ai){if($("#informer").length==0){$(".order-info").after('<p id="informer" class="text-danger text-center">Проверьте введенные данные.</p>')}al.preventDefault()}})})})();(function(){var ah=$(".add-to-cart");ah.on("submit",function(aj){aj.preventDefault();var ak=$(this).parent().find(".id").val(),ai=$(".btn");$.ajax({type:"POST",url:"/cart/add",data:{id:ak},beforeSend:function(){ai.prop("disabled",true)}}).done(function(al){if(al.info!=="error"){var am=$(".items-in-cart");am.text(parseInt(am.text())+1);$(".product-"+al.id).find(".add-to-cart-btn").remove().end().find(".ajax-btn").removeClass("hide").end().next().remove()}}).fail(function(){}).always(function(){ai.prop("disabled",false)})})})();(function(){$(".remove-all").on("click",function(){var ah=confirm("Вы действительно хотите удалить все товары из корзины?");if(ah){$(".one-click-buy-input").prop("required",false);$(".checkout-click-buy-input").prop("required",false);$(".address-buy-input").prop("required",false)}return ah})})();(function(){$(".cart-item-remove").on("click",function(){$(".one-click-buy-input").prop("required",false);$(".checkout-click-buy-input").prop("required",false);$(".address-buy-input").prop("required",false)})})();(function(){aa();$(".cart-product-qty").on("change",function(){var ai=$(this).next().data("price");if(ai!=undefined){var ah=($(this).find("input").val()===""||$(this).find("input").val()<1)?1:$(this).find("input").val();var ak=(parseFloat(ai)*parseFloat(ah))/100;var aj=ak.toString().split(".");var am=parseInt(aj[0]),al=parseInt(aj[1]);if(am&&al){$(this).next().text(am+" грн. "+al+" коп.")}else{if(am){$(this).next().text(am+"  грн.")}else{if(al){$(this).next().text(al+" коп.")}else{$(this).next().text("")}}}}aa()})})();function aa(){var ah=$(".cart-from");var ap=[],ak=[];ah.find(".cart-product-qty").each(function(){if($(this).val()!=""){ap.push(parseInt($(this).val()))}});ah.find(".cart-product-price").each(function(){ak.push($(this).data("price"))});var ao=0;for(var al=0,am=ap.length;al<am;al++){ao+=ap[al]*ak[al]}ao/=100;var ai=ao.toString().split(".");var aj=parseInt(ai[0]),an=parseInt(ai[1]);if(aj&&an){$(".total-sum").text(aj+" грн. "+an+" коп.")}else{if(aj){$(".total-sum").text(aj+"  грн.")}else{if(an){$(".total-sum").text(an+" коп.")}else{$(".total-sum").text("")}}}}(function(){var ah=$(".btn-breadcrumb"),ak=$(".step.hover"),al="step-1";var aj=9;ah.find(".btn").on("click",function(){ah.find(".btn").removeClass("hover");$(this).addClass("hover");al=$(this).data("step");$(".step").css("display","none");$("."+al).css("display","block")});$(".checkout-click-buy-input").on("keypress",function(am){return !(/\D/.test(String.fromCharCode(am.charCode)))}).on("keyup",function(){var am=$(this);if(am.val().length>aj){am.val(am.val().substr(0,aj))}});var ai=0;$(".checkout-click-buy-submit").on("click",function(am){ai=$(".checkout-click-buy-input").val().length;if(ai==0||ai!=aj){if($("#informer").length==0){$(".btn-breadcrumb").after('<p id="informer" class="text-danger text-center">Проверьте введенные данные.</p>')}am.preventDefault()}});$(".next-step").on("click",function(){var am=$(".btn.hover").data("step");if(am=="step-1"){ah.find(".btn").removeClass("hover");ah.find(".btn").eq(1).addClass("hover");$(".step").css("display","none");$(".step-2").css("display","block")}else{if(am=="step-2"){ah.find(".btn").removeClass("hover");ah.find(".btn").eq(2).addClass("hover");$(".step").css("display","none");$(".step-3").css("display","block")}}})})();(function(){var ah=255;$(".comment-textarea").on("keyup",function(){var ai=$(this);if(ai.val().length>ah){ai.val(ai.val().substr(0,ah))}$(".textarea-length-counter").find("span").text(ai.val().length)})})();(function(){$(".checkout-click-buy-submit").on("click",function(){$(".one-click-buy-input").prop("required",false)})})();(function(){var ai=9;var ah=$(".order-form"),aj=$(".order-phone");aj.on("keyup",function(){var ak=$(this);if(ak.val().length>ai){ak.val(ak.val().substr(0,ai))}});ah.on("submit",function(al){var ak=aj.val().length;if(ak==0||ak!=ai){if($("#informer").length==0){ah.prepend('<p id="informer" class="text-danger text-center">Проверьте введенные данные.</p>')}al.preventDefault()}})})();$(".activate-indicators").find("li").first().addClass("active");$(".activate-carousel").find("div").first().addClass("active");(function(){var aj=$(".gallery-image-input");aj.on("change",function(){$(".gallery-informer").remove();if($(this).val().indexOf(".png")>0||$(this).val().indexOf(".jpeg")>0||$(this).val().indexOf(".jpg")>0){$('[type="submit"]').prop("disabled",false)}else{$('[type="submit"]').prop("disabled",true);$(this).parents("form").before('<p class="text-danger gallery-informer">Только изображение (jpeg/jpg или png)</p>')}});var ah=/File has an incorrect mimetype.*/i;var ai=aj.parents("label").next("ul").find("li");if(ah.test(ai.text())){ai.html('<span class="glyphicon glyphicon glyphicon-ban-circle"></span> Недопустимый тип файла')}})();(function(){var ai=9;var ah=$(".personal-data"),aj=$("#user-phone");aj.on("keyup",function(){var ak=$(this);if(ak.val().length>ai){ak.val(ak.val().substr(0,ai))}}).on("keypress",function(ak){return !(/\D/.test(String.fromCharCode(ak.charCode)))});$("#user-name").on("keypress",function(ak){return(/^[а-яА-я ]+$/.test(String.fromCharCode(ak.charCode)))});ah.on("submit",function(al){var ak=aj.val().length;if(ak==0||ak!=ai){if($("#informer").length==0){ah.prepend('<p id="informer" class="text-danger text-center">Проверьте введенные данные.</p>')}al.preventDefault()}})})();(function(){$(".toggle-control").on("click",function(){$(".toggle").addClass("hide");var ah=$(this).data("toggle");$("."+ah).removeClass("hide")})})();(function(){var aj=$(".in-storage-delivery"),ai=$(".in-storage-payment");aj.on("change",function(){var al=$(this).find("option:selected").val();if(al>0){localStorage.setItem("delivery",al)}});ai.on("change",function(){var al=$(this).find("option:selected").val();if(al>0){localStorage.setItem("payment",al)}});var ak=localStorage.getItem("delivery"),ah=localStorage.getItem("payment");if(ak!==null){aj.find("option").each(function(){if($(this).val()==ak){$(this).prop("selected",true)}})}if(ah!==null){ai.find("option").each(function(){if($(this).val()==ah){$(this).prop("selected",true)}})}})();(function(){var ah={set:function(ai,aj){return localStorage.setItem(ai,JSON.stringify(aj))},get:function(ai){return JSON.parse(localStorage.getItem(ai))},remove:function(ai){return localStorage.removeItem(ai)},getItem:function(aj,ai){return this.get(aj)[ai]},getLastItem:function(ai){return this.get(ai)[this.getLength(ai)-1]},getLength:function(ai){return this.get(ai).length},removeElement:function(aj,ai){var ak=this.get(aj);ak.splice(ai,1);this.set(aj,ak);return this.get(aj)},removeLast:function(ai){var aj=this.get(ai);aj.pop();this.set(ai,aj);return this.get(ai)}};$(document).on("click",".set-product-in-store",function(){var ai=15;var an=$(this).parents(".product");var ak=an.find(".store-img").prop("src"),aj=an.find(".store-href").prop("href");var ao={};ao.img=ak.slice(ak.lastIndexOf("/"),ak.length);ao.href=aj.slice(aj.lastIndexOf("/"),aj.length);ao.name=an.find(".store-href").text();ao.price=an.find(".store-price").text();ao.description=an.find(".store-description").text();var am=ah.get("viewed")||[];if(am.length>0){for(var al=0;al<ah.getLength("viewed");al++){if(am[al].href==ao.href){am=ah.removeElement("viewed",al)}}}am.unshift(ao);ah.set("viewed",am);if(ah.getLength("viewed")>ai){ah.removeLast("viewed")}});$(".last-view-toggle").on("click",function(){if(ah.get("viewed")!==null){for(var aj=0,al=ah.getLength("viewed");aj<al;aj++){var ai="";var ak=ah.get("viewed")[aj];ai+='<div class="last-viewed-product-item product row"><div class="col col-sm-3"><a class="store-href" href="/product'+ak.href+'"><img class="img-responsive set-product-in-store store-img" src="/img/product/min'+ak.img+'" width="135" alt=""></a></div><div class="col col-sm-9"><h5><a class="set-product-in-store store-href" href="/product'+ak.href+'">'+ak.name+'</a></h5><p class="store-description">'+ak.description+'</p><p class="store-price">'+ak.price+"</p></div></div>";$(".last-viewed-products").append(ai)}}else{$(".last-viewed-products").append('<h4 class="text-center">Пока ничего нет.</h4>')}})})();(function(){$(".all-purchase").on("click",function(){var ah=$(this);$.ajax({type:"POST",url:"/personal-cabinet",beforeSend:function(){ah.prop("disabled",true)}}).done(function(aj){var ai="";$(aj.purchasedProducts).each(function(ap,au){var am=new Date(au.date.date);var at=am.getDate(),aq=(am.getMonth()<10)?"0"+(am.getMonth()+1):am.getMonth()+1,ar=am.getFullYear();var an=au[0].img,al=au[0].name,ak=au[0].translit,ao=au.price;ai+="<tr>                                    <td>"+at+"."+aq+"."+ar+'</td>                                    <td><img class="img-responsive" src="/img/product/'+an+'" alt="" width="65"></td>                                    <td><a href="/product/'+ak+'.html">'+al+"</a></td>                                    <td>"+(ao/100)+"</td>                                </tr>"});$(".list-ordered-products").find("tbody").remove().end().find("table").append("<tbody>"+ai+"</tbody>");ah.remove()}).fail(function(){}).always(function(){})})})();(function(){var ah=$(".feedback-form");ah.on("submit",function(ak){var ai=$(".feedback-form-email").val(),aj=$(".feedback-form-subject").val(),al=$(".feedback-form-text").val();if(!d.test(ai)||!aj||!al){if($("#informer").length==0){ah.prepend('<p id="informer" class="text-danger text-center">Проверьте введенные данные.</p>')}ak.preventDefault()}})})();(function(){var aj=$(".flash-messenger"),ai=aj.find("li").text(),ak=null;if(ai!=""){aj.removeClass("hide");ah()}aj.on("click",function(){$(this).fadeOut("slow");clearTimeout(ak)});function ah(){ak=setTimeout(function(){aj.trigger("click")},8000)}})()});